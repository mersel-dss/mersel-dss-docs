# ğŸ³ Docker Deployment

Sign API'yi Docker ve Docker Compose ile Ã§alÄ±ÅŸtÄ±rma rehberi.

## ğŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§

```bash
cd devops/docker
docker-compose up -d
```

**EriÅŸim:**
- Sign API: http://localhost:8085
- Prometheus: http://localhost:9090
- Grafana: http://localhost:3000

## ğŸ“¦ Docker Image

### Build

```bash
docker build -f devops/docker/Dockerfile -t mersel-dss-signer-api:0.1.0 .
```

### Multi-stage Build

- **Stage 1:** Maven build
- **Stage 2:** JRE runtime (~250MB)

## ğŸƒ Docker Run

```bash
docker run -d \
  --name sign-api \
  -p 8085:8085 \
  -e PFX_PATH=/app/certs/certificate.pfx \
  -e CERTIFICATE_PIN=your-password \
  -v $(pwd)/certs:/app/certs:ro \
  mersel-dss-signer-api:0.1.0
```

## ğŸ”§ Environment Variables

| Variable | AÃ§Ä±klama | Ã–rnek |
|----------|----------|-------|
| `PFX_PATH` | PFX dosya yolu | `/app/certs/cert.pfx` |
| `CERTIFICATE_PIN` | Sertifika parolasÄ± | `your-password` |
| `CERTIFICATE_ALIAS` | Sertifika alias | `1` veya `my-cert` |
| `IS_TUBITAK_TSP` | TÃœBÄ°TAK timestamp | `true` |
| `JAVA_OPTS` | JVM options | `-Xmx2g` |

## ğŸ“Š Monitoring Stack

```bash
cd devops/docker
docker-compose up -d
```

Åunlar baÅŸlatÄ±lÄ±r:
- Sign API
- Prometheus
- Grafana (Dashboard ID: **11378**)
- AlertManager (optional)

## ğŸ” Container YÃ¶netimi

```bash
# Status
docker-compose ps

# Logs
docker-compose logs -f sign-api

# Shell
docker-compose exec sign-api /bin/sh
```

DetaylÄ± Docker kullanÄ±mÄ± iÃ§in [Getting Started â†’ Docker](/getting-started/docker) sayfasÄ±na bakÄ±n.

