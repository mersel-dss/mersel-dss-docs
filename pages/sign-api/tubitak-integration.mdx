# ğŸ‡¹ğŸ‡· TÃœBÄ°TAK ESYA Entegrasyonu

TÃœBÄ°TAK ESYA zaman damgasÄ± sunucusu entegrasyonu.

## Genel BakÄ±ÅŸ

TÃœBÄ°TAK ESYA, RFC 3161 protokolÃ¼ne ek olarak Ã¶zel kimlik doÄŸrulama mekanizmasÄ± kullanÄ±r.

## ğŸ” Kimlik DoÄŸrulama

### AdÄ±mlar

1. RFC 3161 TimeStampReq oluÅŸturulur
2. Hash deÄŸeri Ã§Ä±karÄ±lÄ±r
3. Authentication token oluÅŸturulur:
   - PBKDF2WithHmacSHA256 ile anahtar tÃ¼retme
   - AES-256-CBC ÅŸifreleme
   - ASN.1 DER encoding
   - Hexadecimal formata dÃ¶nÃ¼ÅŸÃ¼m
4. HTTP Header eklenir (`identity`)

## âš™ï¸ YapÄ±landÄ±rma

```bash
# TÃœBÄ°TAK zaman damgasÄ± sunucusu
TS_SERVER_HOST=http://zd.kamusm.gov.tr/

# TÃœBÄ°TAK mÃ¼ÅŸteri bilgileri
TS_USER_ID=123456
TS_USER_PASSWORD=your_password

# TÃœBÄ°TAK modunu aktif et
IS_TUBITAK_TSP=true
```

## ğŸ“Š KontÃ¶r Sorgulama

```bash
curl http://localhost:8085/api/tubitak/credit
```

**Response:**
```json
{
  "remainingCredit": 5432,
  "customerId": 123456,
  "message": "5432"
}
```

## ğŸ”§ Implementasyon BileÅŸenleri

### TubitakAuthenticationHelper
Kriptografik iÅŸlemler ve authentication token oluÅŸturma.

### TubitakTimestampDataLoader
DSS TimestampDataLoader'Ä± extend eder, identity header'Ä± ekler.

### TimestampConfigurationService
YapÄ±landÄ±rmaya gÃ¶re doÄŸru DataLoader'Ä± seÃ§er.

## ğŸ› Sorun Giderme

### "Identity header invalid"

- MÃ¼ÅŸteri ID ve password doÄŸruluÄŸunu kontrol edin
- `TS_USER_ID` sayÄ±sal olmalÄ±

### HTTP 401/403

- KullanÄ±cÄ± kimlik bilgilerini kontrol edin
- TÃœBÄ°TAK hesabÄ± aktif mi kontrol edin

## ğŸ“š Referanslar

- [RFC 3161 - Time-Stamp Protocol](https://www.ietf.org/rfc/rfc3161.txt)
- [BouncyCastle](https://www.bouncycastle.org/)
- [DSS Framework](https://github.com/esig/dss)

